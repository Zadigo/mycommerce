"use strict";(self["webpackChunkfront2"]=self["webpackChunkfront2"]||[]).push([[540],{1881:function(t,e,s){s.d(e,{Z:function(){return i}});var o=s(4870),r=s(3006),l=s(9307);function i(t,e){const s=(0,o.iH)(!0);async function i(){const t=(0,r.L)();try{const e=await l.L.post(`/shop/products/${t.currentProduct.id}`);this.productVariants=e.data.variants,this.reviews=e.data.reviews,this.recommendedProducts=e.data.recommended_products,s.value=!1}catch(e){t.addErrorMessage("V-AX-PV - Could not get the current product variants")}}async function n(){const s=(0,r.L)();try{const o=e.params.collection;let r=null;r="all"===o?await l.L.get("/collection/all"):await l.L.get(`/collection/${o}`),s.$patch((e=>{e.originalProductsResponse=r.data,e.products=e.originalProductsResponse.results,t.appContext.config.globalProperties.$localstorage.create("products",e.products),t.appContext.config.globalProperties.$session.create("products",r.data)}))}catch(o){console.error(o),s.addErrorMessage("V-AX-PR - An error occured while trying get the collection")}}function a(){t.emit("start-load"),n(),t.emit("end-load")}return{isLoading:s,productsRequest:n,requestProductVariants:i,getProducts:a}}},7540:function(t,e,s){s.r(e),s.d(e,{default:function(){return z}});s(6699);var o=s(3396),r=s(7139);const l=t=>((0,o.dD)("data-v-21adb762"),t=t(),(0,o.Cn)(),t),i={ref:"link",class:"navbar navbar-expand-lg shadow-none navbar-light mb-1"},n={class:"collapse navbar-collapse flex-column justify-content-left align-items-start"},a={class:"navbar-nav w-100 justify-content-center"},c=l((()=>(0,o._)("li",{class:"nav-item font-weight-bold text-uppercase"},[(0,o._)("button",{class:"btn shadow-none disabled"},[(0,o._)("span",{class:"fw-normal"},"Filtres")])],-1))),d=l((()=>(0,o._)("li",{class:"nav-item mx-1"},null,-1))),u={class:"nav-item mx-1"},h={class:"nav-item mx-1"},p={key:0,id:"filters",class:"d-flex justify-content-center",style:{"flex-wrap":"wrap"}},m={key:0},w=["onClick"],g={key:1,class:"d-flex justify-content-center"},f=["onClick"];function v(t,e,s,l,v,b){return(0,o.wg)(),(0,o.iD)("nav",i,[(0,o._)("div",n,[(0,o._)("ul",a,[c,d,(0,o._)("li",u,[(0,o._)("button",{class:"btn btn-light shadow-none fw-normal",onClick:e[0]||(e[0]=t=>b.openFilters("sizes"))},(0,r.zw)(t.$t("Size")),1)]),(0,o._)("li",h,[(0,o._)("button",{class:"btn btn-light shadow-none fw-normal",onClick:e[1]||(e[1]=t=>b.openFilters("colors"))},(0,r.zw)(t.$t("Color")),1)])]),t.showFilters?((0,o.wg)(),(0,o.iD)("div",p,["sizes"==t.selectedFilter?((0,o.wg)(),(0,o.iD)("div",m,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.sizes,((e,s)=>((0,o.wg)(),(0,o.iD)("div",{key:s,class:(0,r.C_)([{active:t.selectedElements.sizes.includes(e)},"md-chip fw-bold me-3"]),onClick:t=>b.setFilterValue("sizes",e)},(0,r.zw)(e),11,w)))),128))])):"colors"==t.selectedFilter?((0,o.wg)(),(0,o.iD)("div",g,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(b.colors,((t,e)=>((0,o.wg)(),(0,o.iD)("div",{key:e,onClick:e=>b.setFilterValue("colors",t[0])},null,8,f)))),128))])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])],512)}var b=s(4806),F=s.n(b),y=s(4301),k=s(3006),L=s(678),P=s(8661),$=s(1881),C={name:"FiltersBar",emits:["loading-products-start","loading-products-end","do-sort","load-products"],data:()=>({items:[],sortMethod:"Latest",sortMethods:["Latest","Alphabetically A-Z","Alphabetically Z-A","Price high to low","Price low to high"],showFilters:!1,selectedFilter:"sizes",selectedElements:{sizes:[],colors:[]},sizes:["XS","S","M","L","XL","XXL"]}),setup(){const t=(0,k.L)(),e=(0,o.FN)(),s=(0,L.yj)(),{getProducts:r,productsRequest:l}=(0,$.Z)(e,s);return{store:t,getProducts:r,productsRequest:l}},computed:{...(0,y.rn)(k.L,{productNames(t){return F().map(t.products,(t=>t.name))}}),colors(){const t=["beige","black","camel","red"];return F().map(t,(t=>[t,(0,P.si)(`/media/swatches/${t}.png`)]))},searchQuery(){const t=new URLSearchParams({...this.selectedElements});return`?${t}`},hasFilters(){const t=F().map(Object.keys(this.selectedElements),(t=>this.selectedElements[t].length>0));return t.some((t=>!0===t))}},beforeMount(){this.sortMethod=this.localStorage.sort,this.doSort(this.sortMethod||"Latest")},mounted(){window.addEventListener("scroll",this.handleScroll)},unmounted(){window.removeEventListener("scroll",this.handleScroll)},methods:{async getFilteredProducts(){try{this.$emit("loading-products-start");const t=await this.$http.get(`shop/advanced/search${this.searchQuery}`);this.store.$patch((e=>{e.products=t.data.results,this.$emit("loading-products-end")}))}catch(t){this.store.addErrorMessage("Could not resolve filter request (V-AX-FB)")}},doSort(t){this.sortMethod=t,this.$emit("do-sort",t)},openFilters(t){t!==this.selectedFilter&&this.showFilters?this.showFilters=!0:this.showFilters=!this.showFilters,this.selectedFilter=t},handleScroll(){const t=(0,P.Ew)(document.body);t>=5&&this.$refs.link.classList.add("scrolled"),(t>=90||0===t)&&this.$refs.link.classList.remove("scrolled")},setFilterValue(t,e){const s=this.selectedElements[t];this.selectedElements[t]=(0,P.lu)(s,e),this.hasFilters?this.getFilteredProducts():this.productsRequest(),(0,P.k3)()},isSelected(t,e){return this.selectedElements[t].includes(e)}}},E=s(89);const _=(0,E.Z)(C,[["render",v],["__scopeId","data-v-21adb762"]]);var z=_}}]);
//# sourceMappingURL=540.99dad587.js.map