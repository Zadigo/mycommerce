(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bdc3f7c"],{"1f09":function(t,e,i){},2662:function(t,e,i){},2677:function(t,e,i){"use strict";var a=i("8654");e["a"]=a["a"]},"3fa12":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{attrs:{id:"images"}},[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("page-header",{attrs:{title:t.$route.meta.text}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-card",[i("v-card-text",[i("v-autocomplete",{attrs:{items:t.imageNames,multiple:"",chips:"",solo:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),i("v-card-actions",[i("v-dialog",{attrs:{width:"800"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{text:""}},"v-btn",n,!1),a),[i("v-icon",{staticClass:"mr-2"},[t._v("mdi-upload")]),t._v(" Upload images ")],1)]}}]),model:{value:t.showUploadImagesDialog,callback:function(e){t.showUploadImagesDialog=e},expression:"showUploadImagesDialog"}},[i("v-card",[i("v-card-title",[t._v(" Upload new images ")]),i("v-card-text",[i("v-file-input",{attrs:{label:"File input","prepend-icon":"mdi-camera",multiple:"",outlined:""}})],1),i("v-divider"),i("v-card-actions",[i("v-btn",{attrs:{text:""}},[t._v("Upload")])],1)],1)],1),i("v-btn",{staticClass:"mr-2",attrs:{text:""}},[t._v("Sélectionner tout")]),i("v-btn",{attrs:{text:""},on:{click:function(e){t.selectedImages=[]}}},[t._v("Déselectionner "),i("v-chip",{staticClass:"ml-2",attrs:{color:"primary",label:""}},[t._v(t._s(t.selectedImages.length))])],1),i("v-btn",{attrs:{color:"indigo",dark:""},on:{click:t.loadGenericProducts}},[t._v(" Associer au produit ")])],1)],1)],1)],1),i("v-row",t._l(t.searchedImages,(function(e){return i("v-col",{key:e.id,attrs:{cols:"4"}},[i("image-container",{key:e.id,attrs:{image:e,"is-loading":t.isLoading,"selected-images":t.selectedImages},on:{"image-selected":t.setSelection}})],1)})),1),i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-btn",{class:{disabled:!t.hasPrevious},on:{click:t.loadPrevious}},[i("v-icon",{staticClass:"mr-2"},[t._v("mdi-arrow-left")]),t._v(" Précédent ")],1),i("v-btn",{class:{disabled:!t.hasNext},on:{click:t.loadNext}},[i("v-icon",{staticClass:"mr-2"},[t._v("mdi-arrow-right")]),t._v(" Suivant ")],1)],1)],1),i("v-btn",{attrs:{elevation:"2",absolute:"",bottom:"",right:"",fab:""}})],1),i("v-dialog",{attrs:{height:"200",width:"500"},model:{value:t.productSelectionModal,callback:function(e){t.productSelectionModal=e},expression:"productSelectionModal"}},[i("v-card",[i("v-card-text",[i("b-list-group",t._l(t.products,(function(e){return i("b-list-group-item",{key:e.id,attrs:{action:""},on:{click:function(i){t.newAssociation.product=e.id}}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),i("v-card-actions",[i("v-btn",{attrs:{text:""},on:{click:t.associateImages}},[t._v(" Associer ")])],1)],1)],1)],1)},n=[],s=i("1da1"),r=(i("96cf"),i("ac1f"),i("841c"),i("4de4"),i("d3b7"),i("caad"),i("2532"),i("b0c0"),i("d81d"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("25f0"),i("a434"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isLoading?i("v-skeleton-loader",{attrs:{type:"image"}}):i("div",{staticClass:"image",attrs:{title:t.image.name}},[i("v-img",{class:{shadow:t.isSelected},attrs:{src:t.image.mid_size},on:{click:function(e){return t.doSelection(t.image)}}}),i("div",{staticClass:"actions"},[i("v-btn",{staticClass:"mr-2",on:{click:function(e){return t.$router.push({name:"dashboard_image_view",params:{id:t.image.id}})}}},[i("v-icon",[t._v("mdi-pencil")])],1),i("v-btn",[i("v-icon",[t._v("mdi-transfer")])],1)],1),i("transition",{attrs:{name:"general-transition"}},[t.isSelected?i("div",{staticClass:"selector",on:{click:function(e){return t.doSelection(t.image)}}},[i("v-icon",[t._v("mdi-check")])],1):t._e()])],1)}),o=[],l={name:"ImageContainer",props:{image:{type:Object,required:!0},isLoading:{type:Boolean,default:!0},selectedImages:{type:Array,default:function(){return[]}}},computed:{isSelected:function(){return this.selectedImages.includes(this.image.id)}},methods:{doSelection:function(){this.$emit("image-selected",this.image.id)}}},c=l,u=(i("925a"),i("2877")),d=i("6544"),h=i.n(d),p=i("8336"),f=i("132d"),v=i("adda"),g=i("3835"),m=i("5530"),b=(i("1276"),i("a630"),i("5319"),i("1f09"),i("c995")),y=i("24b2"),S=i("7560"),x=i("58df"),_=i("80d2"),w=Object(x["a"])(b["a"],y["a"],S["a"]).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,tile:Boolean,transition:String,type:String,types:{type:Object,default:function(){return{}}}},computed:{attrs:function(){return this.isLoading?this.boilerplate?{}:Object(m["a"])({"aria-busy":!0,"aria-live":"polite",role:"alert"},this.$attrs):this.$attrs},classes:function(){return Object(m["a"])(Object(m["a"])({"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile},this.themeClasses),this.elevationClasses)},isLoading:function(){return!("default"in this.$scopedSlots)||this.loading},rootTypes:function(){return Object(m["a"])({actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text"},this.types)}},methods:{genBone:function(t,e){return this.$createElement("div",{staticClass:"v-skeleton-loader__".concat(t," v-skeleton-loader__bone")},e)},genBones:function(t){var e=this,i=t.split("@"),a=Object(g["a"])(i,2),n=a[0],s=a[1],r=function(){return e.genStructure(n)};return Array.from({length:s}).map(r)},genStructure:function(t){var e=[];t=t||this.type||"";var i=this.rootTypes[t]||"";if(t===i);else{if(t.indexOf(",")>-1)return this.mapBones(t);if(t.indexOf("@")>-1)return this.genBones(t);i.indexOf(",")>-1?e=this.mapBones(i):i.indexOf("@")>-1?e=this.genBones(i):i&&e.push(this.genStructure(i))}return[this.genBone(t,e)]},genSkeleton:function(){var t=[];return this.isLoading?t.push(this.genStructure()):t.push(Object(_["s"])(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},t):t},mapBones:function(t){return t.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter:function(t){this.resetStyles(t),this.isLoading&&(t._initialStyle={display:t.style.display,transition:t.style.transition},t.style.setProperty("transition","none","important"))},onBeforeLeave:function(t){t.style.setProperty("display","none","important")},resetStyles:function(t){t._initialStyle&&(t.style.display=t._initialStyle.display||"",t.style.transition=t._initialStyle.transition,delete t._initialStyle)}},render:function(t){return t("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}}),k=Object(u["a"])(c,r,o,!1,null,"451f9193",null),I=k.exports;h()(k,{VBtn:p["a"],VIcon:f["a"],VImg:v["a"],VSkeletonLoader:w});var C=i("6655"),V=i("2ef0"),$={name:"ProductImagesView",components:{ImageContainer:I,PageHeader:C["a"]},data:function(){return{cachedResponse:{},products:[],isLoading:!0,search:[],selectedImages:[],associationMenu:!1,newAssociation:{product:null},productSelectionModal:!1,showUploadImagesDialog:!1}},computed:{images:function(){try{return this.cachedResponse.results}catch(t){return[]}},searchedImages:function(){var t=this;return this.search.length>0?V.filter(this.images,(function(e){return t.search.includes(e.name)})):this.images},imageNames:function(){return V.map(this.images,(function(t){return t.name}))},hasNext:function(){return!!this.cachedResponse.next},hasPrevious:function(){return!!this.cachedResponse.previous}},beforeMount:function(){var t=this;this.$session.contains("images")?(this.cachedResponse=this.$session.retrieve("images"),setTimeout((function(){t.isLoading=!1}),500)):this.loadImages()},methods:{loadImages:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var a,n,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=function(t){var e=100,i=0;if(t){var a=new URL(t),n=a.searchParams.get("limit"),s=a.searchParams.get("offset");e=n||100,i=s||0}var r=new URLSearchParams({limit:e,offset:i});return r},i.prev=1,i.next=4,e.axios.get("/images?".concat(a(t).toString()));case 4:n=i.sent,s=n.data,e.cachedResponse=s,e.$session.create("images",s),e.isLoading=!1,e.scrollToTop(),i.next=15;break;case 12:i.prev=12,i.t0=i["catch"](1),console.log(i.t0);case 15:case"end":return i.stop()}}),i,null,[[1,12]])})))()},associateImages:function(){var t=this;this.associationMenu=!1;var e=this.newAssociation;e["images"]=this.selectedImages,this.$api.dashboard.products.associateImages(e).then((function(e){t.productSelectionModal=!1,t.selectedImages=[]})).catch((function(t){console.log(t)}))},loadPrevious:function(){this.loadImages(this.cachedResponse.previous)},loadNext:function(){this.loadImages(this.cachedResponse.next)},loadGenericProducts:function(){var t=this;this.$api.dashboard.products.generic().then((function(e){t.productSelectionModal=!0,t.products=e.data})).catch((function(t){}))},setSelection:function(t){if(this.selectedImages.includes(t)){var e=V.indexOf(this.selectedImages,t);this.selectedImages=this.selectedImages.splice(0,e)}else this.selectedImages.push(t)}}},O=$,j=i("c6a6"),B=i("b0af"),L=i("99d9"),z=i("cc20"),P=i("62ad"),A=i("a523"),D=i("169a9"),R=i("ce7e"),T=i("2909"),E=i("53ca"),M=(i("a9e3"),i("99af"),i("159b"),i("fb6a"),i("5803"),i("2677")),N=i("d9bd"),U=i("d9f7"),F=M["a"].extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:function(t){return"boolean"===typeof t||[1e3,1024].includes(t)}},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:function(t){return Object(_["G"])(t).every((function(t){return null!=t&&"object"===Object(E["a"])(t)}))}}},computed:{classes:function(){return Object(m["a"])(Object(m["a"])({},M["a"].options.computed.classes.call(this)),{},{"v-file-input":!0})},computedCounterValue:function(){var t=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);var e=this.internalArrayValue.reduce((function(t,e){var i=e.size,a=void 0===i?0:i;return t+a}),0);return this.$vuetify.lang.t(this.counterSizeString,t,Object(_["w"])(e,1024===this.base))},internalArrayValue:function(){return Object(_["G"])(this.internalValue)},internalValue:{get:function(){return this.lazyValue},set:function(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty:function(){return this.internalArrayValue.length>0},isLabelActive:function(){return this.isDirty},text:function(){var t=this;return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map((function(e){var i=e.name,a=void 0===i?"":i,n=e.size,s=void 0===n?0:n,r=t.truncateText(a);return t.showSize?"".concat(r," (").concat(Object(_["w"])(s,1024===t.base),")"):r})):[this.placeholder]},base:function(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips:function(){return this.chips||this.smallChips}},watch:{readonly:{handler:function(t){!0===t&&Object(N["b"])("readonly is not supported on <v-file-input>",this)},immediate:!0},value:function(t){var e=this.multiple?t:t?[t]:[];Object(_["j"])(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback:function(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips:function(){var t=this;return this.isDirty?this.text.map((function(e,i){return t.$createElement(z["a"],{props:{small:t.smallChips},on:{"click:close":function(){var e=t.internalValue;e.splice(i,1),t.internalValue=e}}},[e])})):[]},genControl:function(){var t=M["a"].options.methods.genControl.call(this);return this.hideInput&&(t.data.style=Object(U["d"])(t.data.style,{display:"none"})),t},genInput:function(){var t=M["a"].options.methods.genInput.call(this);return t.data.attrs.multiple=this.multiple,delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot:function(){var t=this;if(!this.prependIcon)return null;var e=this.genIcon("prepend",(function(){t.$refs.input.click()}));return this.genSlot("prepend","outer",[e])},genSelectionText:function(){var t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections:function(){var t=this,e=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((function(i,a){t.$scopedSlots.selection&&e.push(t.$scopedSlots.selection({text:t.text[a],file:i,index:a}))})):e.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},e)},genTextFieldSlot:function(){var t=this,e=M["a"].options.methods.genTextFieldSlot.call(this);return e.data.on=Object(m["a"])(Object(m["a"])({},e.data.on||{}),{},{click:function(){return t.$refs.input.click()}}),e},onInput:function(t){var e=Object(T["a"])(t.target.files||[]);this.internalValue=this.multiple?e:e[0],this.initialValue=this.internalValue},onKeyDown:function(t){this.$emit("keydown",t)},truncateText:function(t){if(t.length<Number(this.truncateLength))return t;var e=Math.floor((Number(this.truncateLength)-1)/2);return"".concat(t.slice(0,e),"…").concat(t.slice(t.length-e))}}}),G=i("0fd9"),q=Object(u["a"])(O,a,n,!1,null,null,null);e["default"]=q.exports;h()(q,{VAutocomplete:j["a"],VBtn:p["a"],VCard:B["a"],VCardActions:L["a"],VCardText:L["b"],VCardTitle:L["c"],VChip:z["a"],VCol:P["a"],VContainer:A["a"],VDialog:D["a"],VDivider:R["a"],VFileInput:F,VIcon:f["a"],VRow:G["a"]})},5803:function(t,e,i){},6655:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-card",[i("b-card-text",{staticClass:"d-flex flex-direction-row justify-content-left"},[i("h1",{staticClass:"home blue-text h2"},[i("router-link",{staticClass:"text-decoration-none font-weight-bold",attrs:{to:{name:"dashboard_index_view"}}},[t._v(" Accueil ")])],1),i("h1",{staticClass:"h2"},[t._v(" "+t._s(t.title)+" ")])])],1)},n=[],s={name:"PageHeader",props:{title:{type:String,required:!0}}},r=s,o=(i("6bf5"),i("2877")),l=Object(o["a"])(r,a,n,!1,null,"0cca0ffb",null);e["a"]=l.exports},"6bf5":function(t,e,i){"use strict";i("2662")},"925a":function(t,e,i){"use strict";i("d663")},d663:function(t,e,i){}}]);
//# sourceMappingURL=chunk-7bdc3f7c.0fa6ce4a.js.map