"use strict";(self["webpackChunkfront2"]=self["webpackChunkfront2"]||[]).push([[184],{5184:function(t,s,e){e.r(s),e.d(s,{default:function(){return L}});var i=e(3396),d=e(7139);const o=t=>((0,i.dD)("data-v-20ca6b76"),t=t(),(0,i.Cn)(),t),a={id:"actions"},n={id:"colors",class:"my-3"},r={class:"mb-2"},c={class:"fw-bold"},l={class:"swatch"},u=["src"],h={id:"sizes",class:"my-2"},p={class:"mb-2 fw-bold"},g={key:0,class:"sizes"},b=["onClick"],w={key:1,id:"sizes"},z={id:"btn-no-size",class:"btn btn-md btn-outline-dark shadow-none border disabled"},f={key:0,class:"bg-light p-2 rounded"},k={id:"cart",class:"d-flex justify-content-left my-4"},m={key:0,class:"spinner-border text-light me-2",role:"status"},_=o((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),C=[_];function S(t,s,e,o,_,S){const y=(0,i.up)("router-link"),v=(0,i.up)("font-awesome-icon");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("div",n,[(0,i._)("p",r,[(0,i._)("span",c,(0,d.zw)(t.$t("Color")),1),(0,i.Uk)(": "+(0,d.zw)(e.product.color),1)]),(0,i._)("div",l,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.productVariants,(s=>((0,i.wg)(),(0,i.j4)(y,{key:s.id,to:{name:"product_view",params:{id:s.id,slug:s.slug,lang:t.$i18n.locale}},class:"color"},{default:(0,i.w5)((()=>[(0,i._)("img",{src:S.buildSwatch(s.color),class:"img-fluid"},null,8,u)])),_:2},1032,["to"])))),128))])]),(0,i._)("div",h,[(0,i._)("p",p,(0,d.zw)(t.$t("Size")),1),S.hasSizes?((0,i.wg)(),(0,i.iD)("div",g,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.product.sizes,((t,s)=>((0,i.wg)(),(0,i.iD)("button",{id:"btn-select-size",key:t.id,class:(0,d.C_)([{"ms-2":s>0,"btn-dark":o.productOptions.default_size==t.name,"btn-light":!(o.productOptions.default_size==t.name)},"btn btn-md shadow-none border"]),onClick:s=>S.setSize(t)},(0,d.zw)(t.name),11,b)))),128))])):((0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("button",z,(0,d.zw)(t.$t("Unique size")),1)]))]),t.noSizeSelected?((0,i.wg)(),(0,i.iD)("div",f,(0,d.zw)(t.$t("Choose a size")),1)):(0,i.kq)("",!0),(0,i._)("div",k,[(0,i._)("button",{id:"btn-add-cart",class:"btn btn-lg btn-dark me-2 fs-4",onClick:s[0]||(s[0]=(...t)=>S.addToCart&&S.addToCart(...t))},[o.addingToCart?((0,i.wg)(),(0,i.iD)("div",m,C)):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,d.zw)(t.$t("Add to cart")),1)]),(0,i._)("button",{id:"btn-add-like",class:"btn btn-md btn-danger fs-4",onClick:s[1]||(s[1]=(...t)=>S.addToLikes&&S.addToLikes(...t))},[(0,i.Wm)(v,{icon:"fa-solid fa-heart"})])])])}var y=e(4301),v=e(3006),$=e(2097),T=e(2440),A={name:"ProductActions",components:{},props:{product:{type:Object},productVariants:{type:Array,default:()=>[]}},setup(){const t=(0,v.L)(),s=(0,i.FN)(),{addingToCart:e,productOptions:d,getCart:o,getSessionId:a}=(0,T.Z)(s);return{store:t,addingToCart:e,productOptions:d,getCart:o,getSessionId:a}},data:()=>({noSizeSelected:!1}),computed:{...(0,y.rn)($.J,["isAuthenticated"]),hasSizes(){return this.product.sizes.length>0}},methods:{async addToCart(){try{this.addingToCart=!0;const s=this.productOptions,e=this.productOptions.default_size;if(this.hasSizes&&null==e)return this.noSizeSelected=!0,void(this.addingToCart=!1);null==e&&(s.default_size="Unique");try{s.session_id=this.getSessionId()}catch(t){s.session_id=null}s.product=this.product.id;const i=await this.$http.post("cart/add",s),d=i.data;this.store.$patch((t=>{t.cart=d,this.$localstorage.create("cart",d)})),this.addingToCart=!1,this.noSizeSelected=!1,this.productOptions={default_size:null}}catch(t){console.error(t),this.store.addErrorMessage(`V-AX-CA: ${t}: ${t.response.message}`)}},async addToLikes(){if(this.isAuthenticated)try{const t=await this.$http.post(`shop/products/${this.product.id}/like`);this.store.addSuccessMessage("Added to like"),this.$localstorage.create("likedProducts",t.data.result)}catch(t){this.store.addErrorMessage("An error occured")}},buildSwatch(t){const s=new URL(`media/swatches/${t.toLowerCase()}.png`,"http://127.0.0.1:8000");return s.toString()},matchesWithRoute(t){return t.id===this.$route.params.id},setSize(t){this.noSizeSelected=!1,this.productOptions.default_size=t.name}}},D=e(89);const O=(0,D.Z)(A,[["render",S],["__scopeId","data-v-20ca6b76"]]);var L=O}}]);
//# sourceMappingURL=184.90cefad7.js.map