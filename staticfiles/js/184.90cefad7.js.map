{"version":3,"file":"static/js/184.90cefad7.js","mappings":"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","sources":["webpack://front2/./src/components/shop/product/ProductActions.vue","webpack://front2/./src/components/shop/product/ProductActions.vue?9af3"],"sourcesContent":["<template>\r\n  <div id=\"actions\">\r\n    <!-- Colors -->\r\n    <div id=\"colors\" class=\"my-3\">\r\n      <p class=\"mb-2\">\r\n        <span class=\"fw-bold\">{{ $t('Color') }}</span>: {{ product.color }}\r\n      </p>\r\n\r\n      <!-- TODO: Create a swatch reusable component -->\r\n      <div class=\"swatch\">\r\n        <router-link v-for=\"variant in productVariants\" :key=\"variant.id\" :to=\"{ name: 'product_view', params: { id: variant.id, slug: variant.slug, lang: $i18n.locale } }\" class=\"color\">\r\n          <img :src=\"buildSwatch(variant.color)\" class=\"img-fluid\">\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Size -->\r\n    <div id=\"sizes\" class=\"my-2\">\r\n      <p class=\"mb-2 fw-bold\">{{ $t('Size') }}</p>\r\n\r\n      <div v-if=\"hasSizes\" class=\"sizes\">\r\n        <button v-for=\"(size, i) in product.sizes\" id=\"btn-select-size\" :key=\"size.id\" :class=\"{ 'ms-2': i > 0, 'btn-dark': productOptions.default_size == size.name, 'btn-light': !(productOptions.default_size == size.name) }\" class=\"btn btn-md shadow-none border\" @click=\"setSize(size)\">\r\n          {{ size.name }}\r\n        </button>\r\n      </div>\r\n\r\n      <div v-else id=\"sizes\">\r\n        <button id=\"btn-no-size\" class=\"btn btn-md btn-outline-dark shadow-none border disabled\">\r\n          {{ $t('Unique size') }}\r\n        </button>\r\n      </div>\r\n\r\n      <!-- <size-guide /> -->\r\n    </div>\r\n\r\n    <div v-if=\"noSizeSelected\" class=\"bg-light p-2 rounded\">\r\n      {{ $t('Choose a size') }}\r\n    </div>\r\n\r\n    <!-- Actions -->\r\n    <div id=\"cart\" class=\"d-flex justify-content-left my-4\">\r\n      <button id=\"btn-add-cart\" class=\"btn btn-lg btn-dark me-2 fs-4\" @click=\"addToCart\">\r\n        <div v-if=\"addingToCart\" class=\"spinner-border text-light me-2\" role=\"status\">\r\n          <span class=\"visually-hidden\">Loading...</span>\r\n        </div>\r\n        {{ $t('Add to cart') }}\r\n      </button>\r\n\r\n      <!-- Add to like -->\r\n      <button id=\"btn-add-like\" class=\"btn btn-md btn-danger fs-4\" @click=\"addToLikes\">\r\n        <font-awesome-icon icon=\"fa-solid fa-heart\" />\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'pinia'\r\nimport { useShop } from '@/store/shop'\r\nimport { useAuthentication } from '@/store/authentication'\r\nimport { getCurrentInstance } from 'vue'\r\n\r\nimport useCartComposable from '@/composables/cart'\r\n\r\n// import SizeGuide from './SizeGuide.vue'\r\n\r\nexport default {\r\n  name: 'ProductActions',\r\n  components: {\r\n    // SizeGuide\r\n  },\r\n  props: {\r\n    product: {\r\n      type: Object\r\n    },\r\n    productVariants: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  setup () {\r\n    const store = useShop()\r\n    const app = getCurrentInstance()\r\n    const { addingToCart, productOptions, getCart, getSessionId } = useCartComposable(app)\r\n    return {\r\n      store,\r\n      addingToCart,\r\n      productOptions,\r\n      getCart,\r\n      getSessionId\r\n    }\r\n  },\r\n  data: () => ({\r\n    noSizeSelected: false\r\n  }),\r\n  computed: {\r\n    ...mapState(useAuthentication, ['isAuthenticated']),\r\n    hasSizes () {\r\n      return this.product.sizes.length > 0\r\n    }\r\n  },\r\n  methods: {\r\n    // TODO: Create a general function\r\n    async addToCart () {\r\n      try {\r\n        this.addingToCart = true\r\n\r\n        const options = this.productOptions\r\n        const default_size = this.productOptions.default_size\r\n\r\n        if (this.hasSizes && default_size == null) {\r\n          this.noSizeSelected = true\r\n          this.addingToCart = false\r\n          return\r\n        }\r\n\r\n        // When the size is unique, and since\r\n        // we initially set the default size\r\n        // as null, set it to Unique or this\r\n        // will return an error requiring that\r\n        // the default_size be not null\r\n        if (default_size == null) {\r\n          options.default_size = 'Unique'\r\n        }\r\n\r\n        try {\r\n          // Try to get a current session_id if the\r\n          // user has already been adding items to\r\n          // his current cart\r\n          options.session_id = this.getSessionId()\r\n        } catch (error) {\r\n          options.session_id = null\r\n        }\r\n        options.product = this.product.id\r\n\r\n        const response = await this.$http.post('cart/add', options)\r\n        const data = response.data\r\n\r\n        this.store.$patch((state) => {\r\n          state.cart = data\r\n          this.$localstorage.create('cart', data)\r\n        })\r\n\r\n        this.addingToCart = false\r\n        this.noSizeSelected = false\r\n        this.productOptions = {\r\n          default_size: null\r\n        }\r\n      } catch (error) {\r\n        console.error(error)\r\n        this.store.addErrorMessage(`V-AX-CA: ${error}: ${error.response.message}`)\r\n      }\r\n    },\r\n    async addToLikes () {\r\n      // TODO: Create a general function for this\r\n      if (this.isAuthenticated) {\r\n        try {\r\n          const response = await this.$http.post(`shop/products/${this.product.id}/like`)\r\n          this.store.addSuccessMessage('Added to like')\r\n          this.$localstorage.create('likedProducts', response.data.result)\r\n        } catch (error) {\r\n          this.store.addErrorMessage('An error occured')\r\n        }\r\n      } else {\r\n        // Open login modal\r\n      }\r\n    },\r\n    buildSwatch (color) {\r\n      // From the color of the variant build the\r\n      // url that allows us to get the color's image\r\n      const url = new URL(`media/swatches/${color.toLowerCase()}.png`, 'http://127.0.0.1:8000')\r\n      return url.toString()\r\n    },\r\n    matchesWithRoute (variant) {\r\n      return variant.id === this.$route.params.id\r\n    },\r\n    setSize (size) {\r\n      this.noSizeSelected = false\r\n      this.productOptions.default_size = size.name\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  .sizes #btn-select-size {\r\n    width: 15%;\r\n  }\r\n  .sizes #btn-no-size {\r\n    width: 50%;\r\n  }\r\n  .swatch {\r\n    position: relative;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: left;\r\n    width: 100%;\r\n  }\r\n  .swatch .color {\r\n    display: block;\r\n    overflow: hidden;\r\n    border-radius: 50%;\r\n    min-height: 34px;\r\n    width: 34px;\r\n  }\r\n  .swatch .router-link-exact-active {\r\n    border: 1px solid white;\r\n  }\r\n  .swatch .color::before {\r\n    border: 2px solid #222;\r\n    border-radius: 50%;\r\n    background: transparent;\r\n  }\r\n  .swatch .color::after {\r\n    border: 2px solid #222;\r\n    border-radius: 50%;\r\n    background: transparent;\r\n  }\r\n  .swatch .color:not(:last-child) {\r\n    margin-right: .5rem;\r\n  }\r\n\r\n  .spinner-border {\r\n    width: 1.5rem;\r\n    height: 1.5rem;\r\n    border-width: .2em;\r\n  }\r\n</style>\r\n","import { render } from \"./ProductActions.vue?vue&type=template&id=20ca6b76&scoped=true\"\nimport script from \"./ProductActions.vue?vue&type=script&lang=js\"\nexport * from \"./ProductActions.vue?vue&type=script&lang=js\"\n\nimport \"./ProductActions.vue?vue&type=style&index=0&id=20ca6b76&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\coding\\\\websites\\\\mycommerce\\\\front2\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-20ca6b76\"]])\n\nexport default __exports__"],"names":["id","class","role","_createElementVNode","_hoisted_16","_createElementBlock","_toDisplayString","_ctx","$props","color","_Fragment","_renderList","variant","_createBlock","_component_router_link","key","to","name","params","slug","lang","locale","src","$options","sizes","size","i","$setup","default_size","onClick","_hoisted_10","_hoisted_17","_createVNode","_component_font_awesome_icon","icon","components","props","product","type","Object","productVariants","Array","default","setup","store","useShop","app","getCurrentInstance","addingToCart","productOptions","getCart","getSessionId","useCartComposable","data","noSizeSelected","computed","mapState","useAuthentication","hasSizes","this","length","methods","async","options","session_id","error","response","$http","post","$patch","state","cart","$localstorage","create","console","addErrorMessage","message","isAuthenticated","addSuccessMessage","result","buildSwatch","url","URL","toLowerCase","toString","matchesWithRoute","$route","setSize","__exports__","render"],"sourceRoot":""}