"use strict";(self["webpackChunkfront2"]=self["webpackChunkfront2"]||[]).push([[756],{5756:function(t,s,e){e.r(s),e.d(s,{default:function(){return T}});var i=e(3396),d=e(7139);const o={id:"actions"},a={id:"colors",class:"my-3"},n={class:"mb-2"},r={class:"fw-bold"},c={class:"swatch"},l=["src"],u={id:"sizes",class:"my-2"},h={class:"mb-2 fw-bold"},p={key:0,class:"sizes"},g=["onClick"],b={key:1,id:"sizes"},z={id:"btn-no-size",class:"btn btn-md btn-outline-dark shadow-none border disabled"},w={key:0,class:"bg-light p-2 rounded"},f={id:"cart",class:"d-flex justify-content-left my-4"};function k(t,s,e,k,m,_){const S=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",a,[(0,i._)("p",n,[(0,i._)("span",r,(0,d.zw)(t.$t("Color")),1),(0,i.Uk)(": "+(0,d.zw)(e.product.color),1)]),(0,i._)("div",c,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.productVariants,(s=>((0,i.wg)(),(0,i.j4)(S,{key:s.id,to:{name:"product_view",params:{id:s.id,slug:s.slug,lang:t.$i18n.locale}},class:"color"},{default:(0,i.w5)((()=>[(0,i._)("img",{src:_.buildSwatch(s.color),class:"img-fluid"},null,8,l)])),_:2},1032,["to"])))),128))])]),(0,i._)("div",u,[(0,i._)("p",h,(0,d.zw)(t.$t("Size")),1),_.hasSizes?((0,i.wg)(),(0,i.iD)("div",p,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.product.sizes,((t,s)=>((0,i.wg)(),(0,i.iD)("button",{id:"btn-select-size",key:t.id,class:(0,d.C_)([{"ms-2":s>0,"btn-dark":k.productOptions.default_size==t.name,"btn-light":!(k.productOptions.default_size==t.name)},"btn btn-md shadow-none border"]),onClick:s=>_.setSize(t)},(0,d.zw)(t.name),11,g)))),128))])):((0,i.wg)(),(0,i.iD)("div",b,[(0,i._)("button",z,(0,d.zw)(t.$t("Unique size")),1)]))]),t.noSizeSelected?((0,i.wg)(),(0,i.iD)("div",w,(0,d.zw)(t.$t("Choose a size")),1)):(0,i.kq)("",!0),(0,i._)("div",f,[(0,i._)("button",{id:"btn-add-cart",class:"btn btn-lg btn-dark me-2 fs-4",onClick:s[0]||(s[0]=(...t)=>_.addToCart&&_.addToCart(...t))},(0,d.zw)(t.$t("Add to cart")),1),(0,i._)("button",{id:"btn-add-like",class:"btn btn-md btn-danger fs-4",onClick:s[1]||(s[1]=(...t)=>_.addToLikes&&_.addToLikes(...t))}," heart ")])])}var m=e(4301),_=e(3006),S=e(2097),C=e(2440),y={name:"ProductActions",components:{},props:{product:{type:Object},productVariants:{type:Array,default:()=>[]}},setup(){const t=(0,_.L)(),s=(0,i.FN)(),{addingToCart:e,productOptions:d,getCart:o,getSessionId:a}=(0,C.Z)(s);return{store:t,addingToCart:e,productOptions:d,getCart:o,getSessionId:a}},data:()=>({noSizeSelected:!1}),computed:{...(0,m.rn)(S.J,["isAuthenticated"]),hasSizes(){return this.product.sizes.length>0}},methods:{async addToCart(){try{this.addingToCart=!0;const s=this.productOptions,e=this.productOptions.default_size;if(this.hasSizes&&null==e)return this.noSizeSelected=!0,void(this.addingToCart=!1);null==e&&(s.default_size="Unique");try{s.session_id=this.getSessionId()}catch(t){s.session_id=null}s.product=this.product.id;const i=await this.$http.post("cart/add",s),d=i.data;this.store.$patch((t=>{t.cart=d,this.$localstorage.create("cart",d)})),this.addingToCart=!1,this.noSizeSelected=!1,this.productOptions={default_size:null}}catch(t){console.error(t),this.store.addErrorMessage(`V-AX-CA: ${t}: ${t.response.message}`)}},async addToLikes(){if(this.isAuthenticated)try{const t=await this.$http.post(`shop/products/${this.product.id}/like`);this.store.addSuccessMessage("Added to like"),this.$localstorage.create("likedProducts",t.data.result)}catch(t){this.store.addErrorMessage("An error occured")}},buildSwatch(t){const s=new URL(`media/swatches/${t.toLowerCase()}.png`,"http://127.0.0.1:8000");return s.toString()},matchesWithRoute(t){return t.id===this.$route.params.id},setSize(t){this.noSizeSelected=!1,this.productOptions.default_size=t.name}}},$=e(89);const v=(0,$.Z)(y,[["render",k],["__scopeId","data-v-35400c83"]]);var T=v}}]);
//# sourceMappingURL=756.42624577.js.map