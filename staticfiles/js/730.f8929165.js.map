{"version":3,"file":"static/js/730.f8929165.js","mappings":"iLAYe,SAASA,EAAmBC,EAAKC,GAC9C,MAAMC,GAAYC,EAAAA,EAAAA,KAAI,GAKtBC,eAAeC,IACb,MAAMC,GAAQC,EAAAA,EAAAA,KAEd,IACE,MAAMC,QAAiBC,EAAAA,EAAAA,KAAa,kBAAiBH,EAAMI,eAAeC,MAE1EC,KAAKC,gBAAkBL,EAASM,KAAKC,SACrCH,KAAKI,QAAUR,EAASM,KAAKE,QAI7BJ,KAAKK,oBAAsBT,EAASM,KAAKI,qBAEzChB,EAAUiB,OAAQ,EAClB,MAAOC,GACPd,EAAMe,gBAAgB,yDAQ1BjB,eAAekB,IACb,MAAMhB,GAAQC,EAAAA,EAAAA,KAEd,IAGE,MAAMgB,EAAiBtB,EAAMuB,OAAOC,WACpC,IAAIjB,EAAW,KAGbA,EADqB,QAAnBe,QACed,EAAAA,EAAAA,IAAW,yBAMXA,EAAAA,EAAAA,IAAY,eAAcc,KAG7CjB,EAAMoB,QAAQC,IACZA,EAAMC,yBAA2BpB,EAASM,KAC1Ca,EAAME,SAAWF,EAAMC,yBAAyBE,QAChD9B,EAAI+B,WAAWC,OAAOC,iBAAiBC,cAAcC,OAAO,WAAYR,EAAME,UAC9E7B,EAAI+B,WAAWC,OAAOC,iBAAiBG,SAASD,OAAO,WAAY3B,EAASM,SAE9E,MAAOM,GACPiB,QAAQjB,MAAMA,GACdd,EAAMe,gBAAgB,+DAI1B,SAASiB,IACPtC,EAAIuC,KAAK,cACTjB,IACAtB,EAAIuC,KAAK,YAGX,MAAO,CACLrC,YACAoB,kBACAjB,yBACAiC,iB,mGCjFGE,MAAM,6B,GACJA,MAAM,e,WAEN,Y,GAAcA,MAAM,W,WAAmC,Q,GAAIC,EAAAA,EAAAA,GAAgC,QAA1BD,MAAM,WAAU,OAAG,G,WAAO,a,qFAHlGE,EAAAA,EAAAA,IASM,MATN,EASM,EARJD,EAAAA,EAAAA,GAOM,MAPN,EAOM,EALJA,EAAAA,EAAAA,GAA2G,aAAhGA,EAAAA,EAAAA,GAA+C,OAA/C,GAA+CE,EAAAA,EAAAA,IAAtBC,EAAAA,cAAY,GAA2D,EAA7CC,EAA6C,KAC3GC,EAAAA,EAAAA,IAGyBC,EAAA,CAHAC,YAAU,eAAEC,EAAAA,MAAK,qBAAuBC,UAAQ,eAAED,EAAAA,MAAK,oBAAhF,C,kBAEE,IAAqB,mBAAlBA,EAAAA,GAAE,oB,4CAYb,GACEE,KAAM,gBACNC,MAAO,CAAC,mBAAoB,kBAC5BC,WAAY,CACVC,qBAAoBA,EAAAA,YAEtBC,MAAO,CACLC,aAAc,CACZC,KAAMC,OACNC,QAAS,IAGbC,SAAU,KACLC,EAAAA,EAAAA,IAAStD,EAAAA,EAAS,CAAC,6B,QC3B1B,MAAMuD,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,S,0HCNErB,EAAAA,EAAAA,IAES,UAFDF,MAAM,2BAA4BwB,QAAK,oBAAEC,EAAAA,aAAAA,EAAAA,eAAAA,KAAjD,EACEC,EAAAA,EAAAA,IAAajB,EAAAA,OAAA,a,uBAUjB,GACEE,KAAM,uBACNC,MAAO,CAAC,aAAc,YACtBe,QACE,MAAMnE,GAAMoE,EAAAA,EAAAA,MACNnE,GAAQoE,EAAAA,EAAAA,OACR,YAAE/B,IAAgBvC,EAAAA,EAAAA,GAAkBC,EAAKC,GAC/C,MAAO,CACLqC,iB,QCfN,MAAMwB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://front2/./src/composables/shop.js","webpack://front2/./src/components/shop/products/PaginationRow.vue","webpack://front2/./src/components/shop/products/PaginationRow.vue?f027","webpack://front2/./src/layouts/shop/BasePaginationButton.vue","webpack://front2/./src/layouts/shop/BasePaginationButton.vue?c69e"],"sourcesContent":["/**\r\n * Implements functionnalities for components\r\n * and views that require working with products\r\n * in the backend\r\n * \r\n */\r\n\r\nimport { ref } from 'vue'\r\nimport { useShop } from '../store/shop'\r\n\r\nimport { client } from '../plugins/axios'\r\n\r\nexport default function useShopComposable (app, route) {\r\n  const isLoading = ref(true)\r\n\r\n  /**\r\n   * Get variants for a specific product\r\n   */\r\n  async function requestProductVariants () {\r\n    const store = useShop()\r\n\r\n    try {\r\n      const response = await client.post(`/shop/products/${store.currentProduct.id}`)\r\n\r\n      this.productVariants = response.data.variants\r\n      this.reviews = response.data.reviews\r\n\r\n      // TODO: If the recommended products is below 1, maybe propose\r\n      // and alternative set of items to the user\r\n      this.recommendedProducts = response.data.recommended_products\r\n\r\n      isLoading.value = false\r\n    } catch (error) {\r\n      store.addErrorMessage('V-AX-PV - Could not get the current product variants')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Request products from a given\r\n   * collection\r\n   */\r\n  async function productsRequest () {\r\n    const store = useShop()\r\n\r\n    try {\r\n      // Sends a request to get the backend\r\n      // without sending an emit\r\n      const collectionName = route.params.collection\r\n      let response = null\r\n\r\n      if (collectionName === 'all') {\r\n        response = await client.get('/collection/all')\r\n      } else {\r\n        // FIXME: When reloading thee product page\r\n        // the collectionName is undefineed making the\r\n        // product page not being able to retrieve the\r\n        // variants\r\n        response = await client.get(`/collection/${collectionName}`)\r\n      }\r\n\r\n      store.$patch((state) => {\r\n        state.originalProductsResponse = response.data\r\n        state.products = state.originalProductsResponse.results\r\n        app.appContext.config.globalProperties.$localstorage.create('products', state.products)\r\n        app.appContext.config.globalProperties.$session.create('products', response.data)\r\n      })\r\n    } catch (error) {\r\n      console.error(error)\r\n      store.addErrorMessage('V-AX-PR - An error occured while trying get the collection')\r\n    }\r\n  }\r\n\r\n  function getProducts () {\r\n    app.emit('start-load')\r\n    productsRequest()\r\n    app.emit('end-load')\r\n  }\r\n\r\n  return {\r\n    isLoading,\r\n    productsRequest,\r\n    requestProductVariants,\r\n    getProducts\r\n  }\r\n}\r\n","<template>\r\n  <div class=\"row text-center my-3 py-3\">\r\n    <div class=\"col-12 pb-6\">\r\n      <!-- TODO: Translate with \"AFFICHAGE ACTUEL 1-48 DE 386 STYLES\" -->\r\n      <p>Showing <span class=\"fw-bold\">{{ productCount }}</span> of <span class=\"fw-bold\">600</span> products</p>      \r\n      <base-pagination-button @start-load=\"$emit('start-pagination')\" @end-load=\"$emit('end-pagination')\">\r\n        <!-- <v-icon class=\"mr-2\">mdi-arrow-down</v-icon> -->\r\n        {{ $t('Load more') }}\r\n      </base-pagination-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'pinia'\r\nimport { useShop } from '@/store/shop'\r\n\r\nimport BasePaginationButton from '@/layouts/shop/BasePaginationButton.vue'\r\n\r\nexport default {\r\n  name: 'PaginationRow',\r\n  emits: ['start-pagination', 'end-pagination'],\r\n  components: {\r\n    BasePaginationButton\r\n  },\r\n  props: {\r\n    productCount: {\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(useShop, ['displayedProductsCount'])\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./PaginationRow.vue?vue&type=template&id=7093f933\"\nimport script from \"./PaginationRow.vue?vue&type=script&lang=js\"\nexport * from \"./PaginationRow.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\coding\\\\websites\\\\mycommerce\\\\front2\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <button class=\"btn btn-lg btn-secondary\" @click=\"getProducts\">\r\n    <slot></slot>\r\n  </button>\r\n</template>\r\n\r\n<script>\r\nimport { getCurrentInstance } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\n\r\nimport useShopComposable from '../../composables/shop'\r\n\r\nexport default {\r\n  name: 'BasePaginationButton',\r\n  emits: ['start-load', 'end-load'],\r\n  setup () {\r\n    const app = getCurrentInstance()\r\n    const route = useRoute()\r\n    const { getProducts } = useShopComposable(app, route)\r\n    return {\r\n      getProducts\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./BasePaginationButton.vue?vue&type=template&id=685fd5f5\"\nimport script from \"./BasePaginationButton.vue?vue&type=script&lang=js\"\nexport * from \"./BasePaginationButton.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\coding\\\\websites\\\\mycommerce\\\\front2\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["useShopComposable","app","route","isLoading","ref","async","requestProductVariants","store","useShop","response","client","currentProduct","id","this","productVariants","data","variants","reviews","recommendedProducts","recommended_products","value","error","addErrorMessage","productsRequest","collectionName","params","collection","$patch","state","originalProductsResponse","products","results","appContext","config","globalProperties","$localstorage","create","$session","console","getProducts","emit","class","_createElementVNode","_createElementBlock","_toDisplayString","$props","_hoisted_6","_createVNode","_component_base_pagination_button","onStartLoad","_ctx","onEndLoad","name","emits","components","BasePaginationButton","props","productCount","type","Number","default","computed","mapState","__exports__","render","onClick","$setup","_renderSlot","setup","getCurrentInstance","useRoute"],"sourceRoot":""}